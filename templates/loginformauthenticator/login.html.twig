{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block body %}
<style>
/* Titre centré */
h1 { display:flex; justify-content:center; color:#1e40af; }

/* Conteneur du formulaire */
.form { max-width: 520px; margin: 0 auto; display: grid; gap: 1rem; }

/* Un label n’a pas besoin de bordure ni width:100% */
label { display:block; font-weight:600; margin-bottom:.35rem; }

/* Champs */
input, select, textarea {
  width: 100%;
  box-sizing: border-box;
  padding: .6rem .8rem;
  border: 1px solid #ccc;
  border-radius: .4rem;
  font: inherit;
  line-height: 1.4;
  transition: border-color .2s, box-shadow .2s;
}

/* Focus accessible (clavier) */
input:focus-visible, select:focus-visible, textarea:focus-visible {
  outline: 2px solid #2563eb;         /* bleu */
  outline-offset: 2px;
  border-color: #2563eb;
  box-shadow: 0 0 0 .15rem rgba(37, 235, 103, 0);
}

/* Survol léger */
input:hover, select:hover, textarea:hover { border-color: #aaa; }

/* Placeholders plus doux */
::placeholder { color: #9ca3af; }

/* États de validation natifs */
input:invalid, select:invalid, textarea:invalid { border-color: #ef4444; }
input:valid, select:valid, textarea:valid { border-color: #22c55e; }

/* Bouton */
button {
  background: #1e40af;
  color: #fff;
  padding: .6rem .8rem;
  border: none;
  border-radius: .4rem;
  cursor: pointer;
  font: inherit;
  transition: transform .02s, opacity .2s, background .2s;
}
button:hover { background: #1b3a99; }
button:active { transform: translateY(1px); }
button:disabled { opacity:.6; cursor:not-allowed; }

/* Motion-reduced friendly */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}

/* Dark mode auto */
@media (prefers-color-scheme: dark) {
  body { background:#0b0f19; color:#e5e7eb; }
  input, select, textarea { background:#0f172a; color:#e5e7eb; border-color:#334155; }
  ::placeholder { color:#64748b; }
  button { background:#3b82f6; }
  button:hover { background:#2563eb; }
}
</style>

    <form method="post">
        {% if error %}
            <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
        {% endif %}

        {% if app.user %}
            <div class="mb-3">
                You are logged in as {{ app.user.userIdentifier }}, <a href="{{ path('app_logout') }}">Logout</a>
            </div>
        {% endif %}

        <h1 class="h3 mb-3 font-weight-normal">Veuillez Vous Connecter</h1>
        <fieldset>
        <label for="username">Email</label>
        <input type="email" value="{{ last_username }}" name="_username" id="username" class="form-control" autocomplete="email" required autofocus>
        <label for="password">Mot de passe</label>
        <input type="password" name="_password" id="password" class="form-control" autocomplete="current-password" required>
        <input type="hidden" name="_csrf_token" data-controller="csrf-protection" value="{{ csrf_token('authenticate') }}">

        {#
            Uncomment this section and add a remember_me option below your firewall to activate remember me functionality.
            See https://symfony.com/doc/current/security/remember_me.html

            <div class="checkbox mb-3">
                <input type="checkbox" name="_remember_me" id="_remember_me">
                <label for="_remember_me">Remember me</label>
            </div>
        #}

        <button class="btn btn-lg btn-primary" type="submit">
            Sign in
        </button>
        <p class="Inscription"> Pas encore inscrit ? <a href="{{ path('app_register') }}">Inscription</a> </p>
        <p class="Password"> Mot de passe oublié </p>

        </fieldset>
    </form>
{% endblock %}
